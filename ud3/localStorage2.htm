<!DOCTYPE HTML>
<html>
   <head>
      <title>localStorage</title>
      <script type='text/javascript'>
         /* Función escribirLocalStorage */
         function escribirLocalStorage() {
            /* Verifica la posibilidad de usar localStorage y JSON */
            if ( typeof localStorage != "undefined" && JSON) {
               /* Definición de un objeto Javascript
               datosPersona */
               var datosPersona = {
                  nombre : document.getElementById("nombre").value,
                  apellido : document.getElementById("apellido").value,
                  mail : document.getElementById("mail").value
               };
               /* Serialización en un objeto JSON de nombre identidad */
               localStorage.setItem("identidad", JSON.stringify(datosPersona));
               /* Visualización de control */
               alert("Registro en localStorage realizado");
            } else {
               /* Mensaje de error (sin posibilidad de almacén localStorage) */
               alert("localStorage no está soportado");
            }
         };
         /* Función eliminarLocalStorage */
         function eliminarLocalStorage() {
            /* Verifica la posibilidad de usar localStorage y JSON */
            if ( typeof localStorage != "undefined" && JSON) {
               /* Eliminación de la entrada identidad en el localStorage */
               /* sessionStorage.clear(); eliminaría también el conjunto de entradas del localStorage */
               sessionStorage.removeItem("identidad");
               /* Actualización de los campos de visualización (<input type="texto" ... />) */
               document.getElementById("nombre").value = "";
               document.getElementById("apellido").value = "";
               document.getElementById("mail").value = "";
               /* Visualización de control */
               alert("Eliminación de la entrada identidad en el localStorage realizada");
            } else {
               /* Mensaje de error (sin posibilidad de almacén localStorage) */
               alert("localStorage no está soportado");
            }
         };
      </script>
   </head>
   <body>
      <!-- Tabla de introducción de datos y de visualización de los campos nom, apellido y mail -->
      <table>
         <tr>
            <td>Nombre</td>
            <td><input type="text" id="nombre" value="" size="40"/></td>
         </tr>
         <tr>
            <td>Apellido</td>
            <td><input type="text" id="apellido" value="" size="40"/></td>
         </tr>
         <tr>
            <td>Mail</td>
            <td><input type="text" id="mail" value="" size="40"/></td>
         </tr>
      </table>
      <!-- Formulario con botones de escritura de lectura y de eliminación -->
      <br />
      <form>
         <input type="button" id="botonEcritura" value="Ecritura en localStorage" onclick="escribirLocalStorage();"/>
         <br />
         <input type="button" id="botonLectura" value="Lectura desde localStorage"/>
         <br />
         <input type="button" id="botonEliminacion" value="Eliminación de la entrada en                           localStorage"onclick="eliminarLocalStorage();"/>
      </form>
      <script type='text/javascript'>
         /* Lectura desde el localStorage */
        document.getElementoById('botonLectura').onclick = function() {
           /* Verifica la posibilidad de usar localStorage y JSON */
           if ( typeof localStorage != "undefined" && JSON) {
              /* Deserialización del objeto JSON leído */
              var datosPersona = JSON.parse(localStorage.getItem("identidad"));
              /* Actualización de los campos de visualización (<input type="texto" ... />) */
             document.getElementById("nombre").value = datosPersona.nombre;
             document.getElementById("apellido").value = datosPersona.apellido;
             document.getElementById("mail").value = datosPersona.mail;
              /* Visualización de control */
              alert("Lectura desde localStorage realizada");
            } else {
              /* Mensaje de error (sin posibilidad de almacén localStorage) */
              alert("localStorage no está soportado");
            }
         };
      </script>
   </body>
</html>